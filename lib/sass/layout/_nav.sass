//----------------------------------------------------------------------------------------------------------------------
// MAIN NAVIGATION
//----------------------------------------------------------------------------------------------------------------------

// Main nav container
.nav
	@extend %viewport-padding
	position: absolute
	+size(100%, $nav-height)
	z-index: $z-index-nav

	// Attach nav to top if opened or in sticky mode
	&.active, &.sticky
		position: fixed
		top: 0

	// Element directly after the nav needs to compensate the height of the nav element
	& + *
		padding-top: $nav-height

	// Nav background is done via pseudo element so that it allows control over z-index and animated movement
	&:before
		content: ''
		display: block
		position: absolute
		top: 0
		left: 0
		+size(100%)

	// Add flex layout to wrapper
	.wrapper
		display: flex
		position: relative
		@if $nav-drawer-behind != true
			z-index: 1


//----------------------------------------------------------------------------------------------------------------------
// NAV LOGO
//----------------------------------------------------------------------------------------------------------------------

.nav-logo // Usually an "<a>" element
	img, picture
		height: 100%
		display: block


//----------------------------------------------------------------------------------------------------------------------
// NAV TOGGLE BUTTON
//
// Button to toggle the off-canvas drawer.
//----------------------------------------------------------------------------------------------------------------------

// Button
.nav-toggle
	position: relative
	display: block
	+size($nav-hamburger-width + rhythm(2), $nav-height) // Width plus padding
	padding: 0 rhythm(1) // Not using mixins because we need to reset the vertical padding to 0
	+margin(null rhythm(-1)) // Compensate extra padding
	background: none
	border: none
	overflow: visible
	cursor: pointer

	// Disable toggle button if nav is not in drawer mode
	+media(">=", $nav-breakpoint)
		display: none

// Hamburger icon
.hamburger
	top: $nav-height / 2 - $nav-hamburger-bar-height / 2
	+transition(background-color) // Fade out middle bar via background instead of opacity so pseudo-children stay visible

	// All bars
	&, &:before, &:after
		position: absolute
		display: block
		background-color: $color-base
		+size($nav-hamburger-width, $nav-hamburger-bar-height)

	// Only top and bottom bar
	&:before, &:after
		content: ''
		+transition(transform)

	// Only top bar
	&:before
		transform: translateY(-($nav-hamburger-height / 2 - $nav-hamburger-bar-height / 2))

	// Only bottom bar
	&:after
		transform: translateY($nav-hamburger-height / 2 - $nav-hamburger-bar-height / 2)

	// Transformation to cross
	@at-root
		.nav.active &
			background-color: transparent // Fade out middle bar
			&:before
				transform: rotate(45deg)
			&:after
				transform: rotate(-45deg)


//----------------------------------------------------------------------------------------------------------------------
// NAV LIST
//
// Listing of menu items.
//----------------------------------------------------------------------------------------------------------------------

// Nav list
.nav-list
	+media("<", $nav-breakpoint)
		display: block
	+media(">=", $nav-breakpoint)
		display: flex
		flex-flow: row nowrap

// Single nav list item
.nav-item
	display: block

// Link inside a nav list item
.nav-link
	display: block
	width: 100%
	line-height: $nav-height
	text-overflow: ellipsis
	overflow: hidden


//----------------------------------------------------------------------------------------------------------------------
// NAV DRAWER
//
// The container that becomes the sliding off-canvas drawer.
//----------------------------------------------------------------------------------------------------------------------

.nav-drawer
	+media("<", $nav-breakpoint)
		position: fixed
		top: 0
		right: 100%
		+size(100%)
		padding-top: $nav-height
		z-index: -1
		+transition(transform)
		@if $nav-drawer-overlay
			&:after
				content: ''
				display: block
				position: absolute
				top: 0
				left: 100%
				+size(100%)
				background: rgba($color-base, .5)
				opacity: 0
				+transition(opacity)
				pointer-events: none
		.nav.active &
			transform: translateX(100%)
			@if $nav-drawer-overlay
				&:after
					opacity: 1